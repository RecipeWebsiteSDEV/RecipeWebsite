<%- include('./partials/header.ejs') %>

	<body>
		<%- include('./partials/pages.ejs') %>
		<div id="bigimage"></div>
		<button id="createButton">Create Recipe</button>
			<div class="search">
				<input type="text" placeholder="Search...">
				<h3>Common Ingredients</h3>
				<form action="/" method="POST">
					<% if (uniqueIngredients.length > 0) { %>
						<% if (!(uniqueIngredients.length + 1) % 5 === 0) { %>
							<% console.log(uniqueIngredients.length + 1) %>
							<% for i in range(0,5) %>
							<% } %>
						<% for (var index = 0; index < uniqueIngredients.length; index += 5) { %>
							<table class="checkboxes">
								<tr>
									<th>
										<label class="checkbox-labels" id="ingredient-<%= index %>"><%= uniqueIngredients[index] %></label><br>
										<input type="checkbox" id="ingredient-<%= index %>-checkbox" name="ingredient<%= index %>" value="<%= uniqueIngredients[index] %>">
									</th>
									<th>
										<label class="checkbox-labels" id="ingredient-<%= index + 1 %>"><%= uniqueIngredients[index + 1] %></label><br>
										<input type="checkbox" id="ingredient-<%= index + 1 %>-checkbox" name="ingredient<%= index + 1 %>" value="<%= uniqueIngredients[index + 1] %>">
									</th>
									<th>
										<label class="checkbox-labels" id="ingredient-<%= index + 2 %>"><%= uniqueIngredients[index + 2] %></label><br>
										<input type="checkbox" id="ingredient-<%= index + 2 %>-checkbox" name="ingredient<%= index + 2 %>" value="<%= uniqueIngredients[index + 2] %>">
									</th>
									<th>
										<label class="checkbox-labels" id="ingredient-<%= index + 3 %>"><%= uniqueIngredients[index + 3] %></label><br>
										<input type="checkbox" id="ingredient-<%= index + 3 %>-checkbox" name="ingredient<%= index + 3 %>" value="<%= uniqueIngredients[index + 3] %>">
									</th>
									<th>
										<label class="checkbox-labels" id="ingredient-<%= index + 4 %>"><%= uniqueIngredients[index + 4] %></label><br>
										<input type="checkbox" id="ingredient-<%= index + 4 %>-checkbox" name="ingredient<%= index + 4 %>" value="<%= uniqueIngredients[index + 4] %>">
									</th>
								</tr>
							</table>
							<script> document.getElementById("ingredient-29").style.display = "none"; </script>
							<script> document.getElementById("ingredient-29-checkbox").style.display = "none"; </script>
						<% } %>
					<% } else { %>
					<p>There are no ingredients to display...</p>
					<% } %>
					<div class="filler"></div>
					<button id="searchButton">Search</button>
				</form>
    <% if (recipes.length > 0) { %>
    <% recipes.forEach((recipe, index) => { %>
    <div class="accordion-item-<%= index %> ">
      <h2 class="accordion-header" id="flush-headingOne">
        <button class="accordion-button collapsed-<%= index %>" type="button" data-bs-toggle="collapse"
          data-bs-target="#recipe-<%= index %>" style="background-color:<%= recipeContains[index].recipeColor %>">
          <h3 class="name"><%= recipe.name %></h3>
        </button>
      </h2>
      <div id="recipe-<%= index %>" class="accordion-collapse collapse" data-bs-parent="#recipes" >
        <div class="accordion-body">
			<p class="author">Author: <%= recipe.author %></p>
			<p class="description">Description: <%= recipe.description %></p>
			<p class="dishType">Dish Type: <%= recipe.dishType %></p>
			<p class="difficulty">Difficulty: <%= recipe.difficulty %></p>
			<p class="instructions">Instructions: <%= recipe.instructions %></p>
			<p>Ingredients:</p>
			<ul class="ingredients-<%= index %>">
				<% for (let i = 0; i < recipe.ingredients.length; i++) { %>
					<li class="ingredient-<%= i %>"><%= recipe.ingredients[i] %></li>
				<% } %>
			
			</ul>
        </div>
      </div>
    </div>
    <% }) %>
    <% } else { %>
    <p>There are no recipes to display...</p>
    <% } %>
  </div>
	
</body>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

</html>